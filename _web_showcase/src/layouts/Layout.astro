---
import '../styles/global.css';
import ToastSystem from '../components/ToastSystem.svelte';
import { ICONS } from "../lib/icons"

interface Props {
	title: string;
}

const { title, ...props } = Astro.props;
const { themeLight, themeDark } = ICONS;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script is:inline>
      (function() {
        const theme = localStorage.getItem('jsoon_theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      })();
    </script>
	</head>
	<body>
    <ToastSystem client:load />
    <div class="min-h-screen flex flex-col">
      <nav class="w-full p-6 neo-border border-x-0 border-t-0 bg-neo-purple text-white dark:bg-neo-pink dark:text-black sticky top-0 z-50 flex justify-between items-center transition-colors">
        <div class="flex w-full justify-between gap-4">
          <button
            class={`neo-button-sm default ${Astro.url.pathname === '/' ? 'opacity-0 pointer-events-none' : ''}`}>
          <a class="grid items-center w-full h-full " href="/"><Fragment set:html={ICONS.back} /></a>
          </button>
          <a href="/" class="text-2xl md:text-[3rem] font-black uppercase tracking-tighter">
            J-SOON &nbsp; // &nbsp;&nbsp;WEB &nbsp;DEMO
          </a>
          <button 
            id="theme-toggle" 
            class="neo-button-sm default"
            aria-label="Toggle theme"
          >
          <Fragment set:html={themeDark} />
          </button>
        </div>
      </nav>
      <main class="flex-grow p-6 md:p-12">
        <slot />
      </main>
      <footer class="p-6 neo-border border-x-0 border-b-0 bg-neo-purple text-white dark:bg-neo-pink dark:text-black text-center font-bold transition-colors">
        J-SOON // {new Date().getFullYear()}
      </footer>
    </div>

    <script is:inline define:vars={{ themeLight, themeDark }}>
      const themeToggle = document.getElementById("theme-toggle");
      
      const updateIcon = (isDark) => {
        if (themeToggle) themeToggle.innerHTML = isDark ? themeLight : themeDark;
      };

      updateIcon(document.documentElement.classList.contains("dark"));

      themeToggle?.addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.setItem("jsoon_theme", isDark ? "dark" : "light");
        updateIcon(isDark);
      });
    </script>
	</body>
</html>
